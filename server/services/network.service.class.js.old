const ServiceClass = require('./service.class')

module.exports = class NetServiceClass extends ServiceClass {
  receive (msg) {
    switch (msg.service) {
      case 'find':
        this.find(msg.params)
        break
      case 'get':
        this.get(msg._id, msg.params)
        break
      case 'create':
        this.create(msg.data, msg.params)
        break
      case 'update':
        this.update(msg._id, msg.data, msg.params)
        break
      case 'patch':
        this.patch(msg._id, msg.data, msg.params)
        break
      default:
        break
    }
  }

  send (userId, request, data) {
    const message = {}
    message.service = '/api/' + this.name
    message.request = request
    message.data = data

    this.app.service('/api/messages').send(userId, message)
  }
}
